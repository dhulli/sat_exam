{% extends "base.html" %}
{% block title %}{{ exam.title }} · Results{% endblock %}
{% block content %}
<h1>{{ exam.title }} — Results</h1>
<p><strong>Raw:</strong> {{ attempt.raw }} / {{ total }}</p>
<p><strong>Percent:</strong>
  {% if attempt.percent is not none %} {{ (attempt.percent * 100) | round(1) }}%
  {% else %} — {% endif %}
</p>
<p><strong>Scaled score:</strong> {{ attempt.scaled if attempt.scaled is not none else '—' }}</p>

<ol class="result-list">
  {% for q in questions %}
    {% set sel = answers.get(q.id) %}
    {% set ok = (sel == q.correct) %}
    <li class="result-item {{ 'correct' if ok else 'incorrect' }}">
      <div class="qtext">Q{{ q.order_index }}. {{ q.text }}</div>
      <div>Your answer: {{ sel if sel else '—' }}</div>
      <div>Correct answer: {{ q.correct }}</div>
    </li>
  {% endfor %}
</ol>
<a href="{{ url_for('exam.list_exams') }}">Back to exams</a>
{% endblock %}
